const { checkEnvironmentVariables } = require('../utils/env');

const envVariables = [
   <%_ if (sequelize) { _%>
    '<%= name %>_DB_HOST',
    '<%= name %>_DB_NAME',
    '<%= name %>_DB_USER',
    '<%= name %>_DB_PASSWORD',
    <%_ } _%>
    <%_ if (jwt) { _%>
    '<%= name %>_JWT_SECRET',
    <%_ } _%>
];

checkEnvironmentVariables(envVariables);

const env = process.env.NODE_ENV || 'development';
const isProduction = env === 'production';
const isDevelopment = !isProduction;

module.exports = {
  // Server options
  host: '0.0.0.0',
  port: 8080,

  // Application environment
  env,
  isProduction,
  isDevelopment,

  <%_ if (sequelize) { _%>
  // Database config
  db: {
    host: process.env.<%= name %>_DB_HOST,
    database: process.env.<%= name %>_DB_NAME,
    username: process.env.<%= name %>_DB_USER,
    password: process.env.<%= name %>_DB_PASSWORD,
  },
  <%_ } _%>

  <%_ if (jwt) { _%>
  // JWT config
  JWT: {
    algorithm: 'HS256',
    accessTokenExpiryTime: 900, // 15 minutes
    refreshTokenExpiryTime: 3600, // 1 hour
    secret: process.env.<%= name %>_JWT_SECRET,
  },
  <%_ } _%>
};
