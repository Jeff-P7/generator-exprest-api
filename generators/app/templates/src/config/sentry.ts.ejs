import * as Sentry from '@sentry/node';
import * as Tracing from '@sentry/tracing';
import router from '../routes';
import config from '.';

/**
 * Sentry initialization
 */
Sentry.init({
  enabled: config.isProduction,
  tracesSampleRate: 1.0,
  integrations: [
    // Enable HTTP calls tracing
    new Sentry.Integrations.Http({ tracing: true }),
    // Enable Express.js middleware tracing
    new Tracing.Integrations.Express({ router: router as any }),
  ],
});
