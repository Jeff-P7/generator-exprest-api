version: '3'

services:
  app:
    build:
      target: development<% if (sequelize || redis) { %>
    entrypoint: dockerize<% if (sequelize) { %> -wait tcp://db:3306<% } %><% if (redis) { %> -wait tcp://redis:6379<% } %> -timeout 30s npm run dev<% } %>
    environment:
      - NODE_ENV=development
    volumes:
      - ./src:/home/node/app/src
